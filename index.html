<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="./src/subway-frotteur.css" />
</head>
<body>
<div class="header">SUBWAY FROTEUR GAME</div>
    <canvas id="canvas" height="800" width="800"></canvas>

    <script>



        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = 'black';
        ctx.font = '18px serif';
     

   
       
       function drawLines(){
               ctx.beginPath();
        ctx.moveTo(0,2250);
        ctx.lineTo(388,0);
        ctx.moveTo(412, 0);
        ctx.lineTo(800,2250)
        ctx.stroke();
        };

      function drawPaths(){
               ctx.beginPath();
        ctx.moveTo(0,800);
        ctx.lineTo(360,0);
        ctx.moveTo(440, 0)
        ctx.lineTo(800,800)
        ctx.stroke();
        };
     
     
      var frotteurimage = new Image();
      frotteurimage.src="./pictures/frotteur.png";

      var girlimage=new Image();
      girlimage.src="./pictures/girl-running-rigth.png";

      var girlimageLeft=new Image();
      girlimageLeft.src="./pictures/girl-running-lef.png";

        var currentGirl = girlimage;

    setInterval (function (){
        if( currentGirl === girlimage){
            currentGirl = girlimageLeft;
        }
        else {
            currentGirl = girlimage;
        }
    }, 250)

      var frotteurArmy=[];

      function Frotteur( x, y , hgt, wdt, path, speedx, speedy){
        this.x= x;
        this.y= y;
        this.speedx = speedx;
        this.speedy = speedy;
        this.heigth= hgt;
        this.width =wdt;
        this.path = path;

        };

    Frotteur.prototype.drawFrot= function (){
      if (this.path ===1 && this.y< 100){
            this.y += 0.5;
            this.x -= 0.3;
            this.heigth += 0.3;
            this.width += 0.25;
      }else if (this.path ===1 && this.y< 200){
            this.y += 1;
            this.x -= 0.7;
            this.heigth += 0.7;
            this.width += 0.5;      
       }else if (this.path ===1 && this.y< 300){
            this.y += 1.5;
            this.x -= 1.2;
            this.heigth += 1.2;
            this.width += 1;
       }else if (this.path ===1 && this.y> 300){
            this.y += 5;
            this.x -= 1.7;
            this.heigth += 1.5;
            this.width += 1;   
        } else if (this.path ===2 && this.y< 100){
            this.y += 0.5;
            this.x -= 0.125;
            this.heigth += 0.3;
            this.width += 0.25;
      }else if (this.path ===2 && this.y< 200){
            this.y += 1;
            this.x -= 0.23;
            this.heigth += 0.7;
            this.width += 0.5;      
       }else if (this.path ===2 && this.y< 300){
            this.y += 1.5;
            this.x -= 0.3;
            this.heigth += 1.2;
            this.width += 1;
       }else if (this.path ===2 && this.y> 300){
            this.y += 5;
            this.x -= 0.4;
            this.heigth += 1.5;
            this.width += 1;    
        }else if (this.path ===3 && this.y< 100){
            this.y += 0.5;
            this.x += 0.1;
            this.heigth += 0.3;
            this.width += 0.25;
      }else if (this.path ===3 && this.y< 200){
            this.y += 1;
            this.x += 0.3;
            this.heigth += 0.7;
            this.width += 0.5;      
       }else if (this.path ===3 && this.y< 300){
            this.y += 1.5;
            this.x += 0.5;
            this.heigth += 1.2;
            this.width += 1;
       }else if (this.path ===3 && this.y> 300){
            this.y += 5;
            this.x += 1;
            this.heigth += 1.3;
            this.width += 1; 
       }
        var frot = this;

            ctx.drawImage(frotteurimage, frot.x, frot.y, frot.width, frot.heigth);
    };  
            
 function boxCollision (x1, y1, width1, height1, x2, y2, width2, height2) {
        return x1 < x2 + width2 &&
        x1 + width1 > x2 &&
        y1 < y2 + height2 &&
        height1 + y1 > y2
        }
        
   
    
    

   
setInterval(function() {
    ctx.clearRect(0, 0, 800, 800);
    drawPaths();
    drawLines();
    frotteurArmy.forEach( function(unfrot){
        unfrot.drawFrot();
    });


    ctx.fillText("Girl_x: " + girl.x2, 500,40);
    ctx.fillText("Girl_y: " + girl.y2, 500,60);
    draw(girl);


    frotteurArmy.forEach( function( unfrot ){
        var isCollision = boxCollision (girl.x2, girl.y2, 200, 350, unfrot.x, unfrot.y, unfrot.width, unfrot.heigth);
        if (isCollision) {
        console.log("frot√©");
        }
    })
},1000/60);



    setInterval(function(){
        var rdmNbm= (Math.floor(Math.random()*3));
        if (rdmNbm===0){
            frotteurArmy.push(new Frotteur (360,-20, 0, 20, 1))
            console.log("PATH ONE");
        }else if(rdmNbm===1){
            frotteurArmy.push(new Frotteur (390,-20, 0, 20, 2))
            console.log("PATH TWO");
        }else {
            frotteurArmy.push(new Frotteur (420,-20, 0, 20, 3))
            console.log(new Frotteur);
            console.log("PATH TREE");
     }   

    },2500);


var girl ={
  x2: 300,
  y2: 500,
  heigth2: 350,
  width2:200,
  moveLeft:  function() {if (this.x2 ===0){this.x2 ===0}else{ this.x2  -= 300} },
  moveRight: function() {if (this.x2 ===600){this.x2 ===600}else{ this.x2  += 300} },
};


function draw(girl) {
     ctx.drawImage(currentGirl, girl.x2, girl.y2, 200, 350); 
};



document.onkeydown = function(e) {
  switch (e.keyCode) {
    case 37: girl.moveLeft();  console.log('left',  girl); break;
    case 39: girl.moveRight(); console.log('right', girl); break;
  }
};


</script>
</body>
</html>